"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[566],{3045:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(2791),r=n(9434),c=n(9894),i=n(414),u=n(2639),o=n(1232),s=n(6906),l=n(5861),m=n(4687),p=n.n(m),f=n(5294).Z.create({baseURL:"https://6567153e64fcff8d730fb353.mockapi.io/api/v1/"}),h=function(e,t,n,a){var r=e.filter((function(e){var r=Number(e.rentalPrice.replace("$","")),c=e.mileage,i=Number(t)||1e4,u=Number(n)||0,o=Number(a)||5e5;return r<=i&&(c>=u&&c<=o)}));return r},v=n(2905),x=function(e){return e.cars.cars},d=function(e){return e.cars.isLoading},_=function(e){return e.cars.isLoadMore},g=n(1056),j=function(e){return e.filters},C="CarsList_listContainer__dh-Ot",b=n(3329),M=function(){var e=(0,r.I0)(),t=(0,r.v9)(x),n=(0,r.v9)(d),m=(0,r.v9)(_),M=(0,r.v9)(j),N=!n&&0!==t.length&&!m;(0,a.useEffect)((function(){e(function(e){var t=e.page,n=e.limit,a=e.make,r=e.priceTo,c=e.mileageFrom,i=e.mileageTo;return function(){var e=(0,l.Z)(p().mark((function e(u){var o,s,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((0,v.nP)()),e.prev=1,e.next=4,f.get("/adverts?page=".concat(t,"&limit=").concat(n,"&make=").concat(a));case 4:return o=e.sent,s=o.data,e.next=8,h(s,r,c,i);case 8:(l=e.sent).length<n&&u((0,v.Uq)(!0)),u((0,v.oV)(l)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),u((0,v.KF)(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()}(M))}),[e,M]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:C,children:[n&&(0,b.jsx)(u.a,{}),0===t.length&&!n&&(0,b.jsx)(o.C,{text:s.l}),t.map((function(e){return(0,b.jsx)(i.G,{car:e},e.id)}))]}),N&&(0,b.jsx)(c.z,{onClick:function(t){e((0,g.T)({page:M.page+1}))},size:"link",text:"Load more"})]})},N=n(1413),k=n(9439),S=JSON.parse('["Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Mercedes-Benz","Chrysler","Kia","Land"]'),T="FormFilter_formContainer__6hINT",I=n(3433),F=n(5984),L="Select_select__xpMvT",Z="Select_selectBrand__XWg-C",y="Select_selectPrice__vN0Yj",P=function(e){var t=e.name,n=e.value,a=e.onChange,r=e.text,c=e.data,i=null;return"model"===t?i=Z:"price"===t&&(i=y),(0,b.jsxs)("select",{name:t,className:"".concat(L," ").concat(i),value:n,onChange:a,children:[(0,b.jsx)("option",{value:"",defaultValue:!0,children:r}),c.map((function(e){return(0,b.jsx)("option",{value:e,children:e},(0,F.x0)())}))]})},z="Label_formLabel__loz5T",w=function(e){var t=e.text,n=e.children;return(0,b.jsxs)("label",{className:z,children:[t,n]})},B="InputSet_formInputWrapper__VSpNG",E=function(e){var t=e.children;return(0,b.jsx)("div",{className:B,children:t})},V="Input_inputRelative__APMlg",A="Input_input__07+Id",G="Input_inputFrom__SDS0M",R="Input_inputTo__0SPeJ",U="Input_inputText__68ld9",W=function(e){var t=e.name,n=e.value,a=e.onChange,r=e.text,c=null;return"from"===t?c=G:"to"===t&&(c=R),(0,b.jsxs)("div",{className:V,children:[(0,b.jsx)("input",{type:"text",name:t,value:n,onChange:a,className:"".concat(A," ").concat(c)}),(0,b.jsx)("p",{className:U,children:"".concat(r,":")})]})},$=function(){var e=(0,r.I0)(),t=(0,a.useState)("all"),n=(0,k.Z)(t,2),i=n[0],u=n[1],o=(0,a.useState)(""),s=(0,k.Z)(o,2),l=s[0],m=s[1],p=(0,a.useState)(""),f=(0,k.Z)(p,2),h=f[0],d=f[1],_=(0,a.useState)(""),C=(0,k.Z)(_,2),M=C[0],F=C[1],L=(0,r.v9)(x),Z=(0,r.v9)(j);(0,a.useEffect)((function(){Z&&(u(Z.make),m(Z.priceTo),d(Z.mileageFrom),F(Z.mileageTo))}),[Z]);var y=function(e){for(var t=e.map((function(e){return Number(e.rentalPrice.replace("$",""))})),n=Math.min.apply(Math,(0,I.Z)(t)),a=Math.max.apply(Math,(0,I.Z)(t)),r=10*Math.round(n/10),c=10*Math.round(a/10),i=[],u=r;u<=c+10;u+=10)i.push(u);return i}(L),z=function(e){var t=e.target.name;"from"===t&&d(e.target.value),"to"===t&&F(e.target.value)};return(0,b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={make:i,priceTo:l,mileageFrom:h,mileageTo:M};e((0,v.Qn)()),e((0,g.T)((0,N.Z)((0,N.Z)({},n),{},{page:1})))},className:T,children:[(0,b.jsx)(w,{text:"Car brand",children:(0,b.jsx)(P,{name:"model",data:S,value:i,onChange:function(e){u(e.target.value)},text:"Enter the text"})}),(0,b.jsx)(w,{text:"Price / 1 hour",children:(0,b.jsx)(P,{name:"price",data:y,value:l,onChange:function(e){m(e.target.value)},text:"To $"})}),(0,b.jsx)(w,{text:"\u0421ar mileage / km",children:(0,b.jsxs)(E,{children:[(0,b.jsx)(W,{name:"from",value:h,onChange:z,text:"From"}),(0,b.jsx)(W,{name:"to",value:M,onChange:z,text:"To"})]})}),(0,b.jsx)(c.z,{type:"submit",size:"m",text:"Search"})]})},D=function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($,{}),(0,b.jsx)(M,{})]})}}}]);
//# sourceMappingURL=566.bc93c101.chunk.js.map